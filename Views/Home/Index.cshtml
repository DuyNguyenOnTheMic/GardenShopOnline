@{
    ViewBag.Title = "Trang chủ";
}

<!-- Begin Slider Area -->
<div class="slider-area">

    <!-- Main Slider -->
    <div class="swiper-container main-slider swiper-arrow with-bg_white">
        <div class="swiper-wrapper">
            <div class="swiper-slide animation-style-01">
                <div class="slide-inner style-1 bg-height" data-bg-image="../../assets/customer/images/slider/bg/1-1.jpg">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-6 order-2 order-lg-1 align-self-center">
                                <div class="slide-content text-black">
                                    <span class="offer">65% Off</span>
                                    <h2 class="title">New Plant</h2>
                                    <p class="short-desc">Pronia, With 100% Natural, Organic & Plant Shop.</p>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-8 offset-md-2 offset-lg-0 order-1 order-lg-2">
                                <div class="inner-img">
                                    <div class="scene fill">
                                        <div class="expand-width" data-depth="0.2">
                                            <img src="~/assets/customer/images/slider/inner-img/New.png" alt="Inner Image">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-slide animation-style-01">
                <div class="slide-inner style-1 bg-height" data-bg-image="../../assets/customer/images/slider/bg/1-1.jpg">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-6 order-2 order-lg-1 align-self-center">
                                <div class="slide-content text-black">
                                    <span class="offer">65% Off</span>
                                    <h2 class="title">New Plant</h2>
                                    <p class="short-desc">Pronia, With 100% Natural, Organic & Plant Shop.</p>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-8 offset-md-2 offset-lg-0 order-1 order-lg-2">
                                <div class="inner-img">
                                    <div class="scene fill">
                                        <div class="expand-width" data-depth="0.2">
                                            <img src="~/assets/customer/images/slider/inner-img/New2.png" alt="Inner Image">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Add Pagination -->
        <div class="swiper-pagination d-md-none"></div>
        <!-- Add Arrows -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    </div>

</div>
<!-- Slider Area End Here -->
<!-- Begin Category Area -->
<div class="product-area mt-5">
    <div class="container">
        <div class="section-title-wrap">
            <h2 class="section-title mb-0">Our Categories</h2>
        </div>
        <div class="row">
            <div class="col-lg-12">
                @{ Html.RenderAction("CategoryList", "Home");}
            </div>
        </div>
    </div>
</div>
<!-- Product Category End Here -->
<!-- Begin Product Area -->
<div class="product-area">
    <div class="container">
        <div class="section-title-wrap">
            <h2 class="section-title mb-0">Our Products</h2>
        </div>
        <div class="row">
            <div class="col-lg-12 mb-4">
                <div class="product-topbar pb-0 pt-3">
                    <ul>
                        <li class="short">
                            @Html.DropDownList("Type", null, "Sort by type", new { @class = "nice-select filter-select", @id = "typeFilter" })
                        </li>
                        <li class="short">
                            @Html.DropDownList("Category", null, "Sort by category", new { @class = "nice-select filter-select", @id = "categoryFilter" })
                        </li>
                    </ul>
                </div>
                <div id="dataContainer">
                    @{ Html.RenderAction("ProductList", "Home");}
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Product Area End Here -->
@section scripts{
    <script type="text/javascript">
        $('.add-to-cart').on('click', function (e) {
            e.preventDefault();
            // Call action to add product to cart
            $.ajax({
                url: $(this).attr('href'),
                type: 'GET'
            }).done(function () {
                // Refresh mini cart
                getMiniCart();
                toastr.options.positionClass = 'toast-bottom-right';
                toastr["success"]("Add succeeded!");
            });
        });

        // Handle event on filter change
        $(".filter-select").on('change', function () {
            var typeId = $("#typeFilter").val();
            var categoryId = $('#categoryFilter').val();
            GetProductList(typeId, categoryId)
        });

        function GetProductList(typeId, categoryId) {
            $.ajax({
                url: '@Url.Action("ProductList", "Home")',
                type: 'GET',
                data: {
                    categoryId: categoryId,
                    typeId: typeId,
                },
            }).done(function (result) {
                $('#dataContainer').html(result);
            }).fail(function (XMLHttpRequest, textStatus, errorThrown) {
                console.log(textStatus)
                console.log(errorThrown)
                alert("Something Went Wrong, Try Later");
            });
        }
    </script>
}